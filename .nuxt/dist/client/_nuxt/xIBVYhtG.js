import{W as m,r,X as c,i as d}from"./jdd4cAWb.js";const g=m("auth",()=>{const l=r(!1),o=r({id:null,email:"",fullname:"",phoneNumber:"",role:""}),t=c(),u=()=>{const e=localStorage.getItem("user"),i=localStorage.getItem("token");e&&i&&(l.value=!0,o.value=JSON.parse(e))},n=e=>{l.value=!0,o.value={id:e.user.id,email:e.user.email,fullname:e.user.fullname,phoneNumber:e.user.phoneNumber,role:e.user.role},localStorage.setItem("user",JSON.stringify(o.value)),localStorage.setItem("token",e.token),e.user.role==="admin"?t.push("/admin"):t.push("/")},s=()=>{l.value=!1,o.value={id:null,email:"",fullname:"",phoneNumber:"",role:""},localStorage.removeItem("user"),localStorage.removeItem("token"),t.push("/")},a=d(()=>{var e;return((e=o.value)==null?void 0:e.role)==="admin"});return{isAuthenticated:l,user:o,login:n,logout:s,initializeAuth:u,isAdmin:a}});export{g as u};
